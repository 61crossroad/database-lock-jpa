# GnB 다이렉트 오더 크롤러, 주문 연동

## 미정인 정책 (결정에 따라 추가 개발)
color 필드에 A1192, F0UU0 같은 코드 명(?)이 입력되는 예외 케이스 정리 필요  
  - 결정될 방안에 따라 크롤러와 프론트엔드까지 영향력이 있을 수 있음  
가격 산정식 적용과 관리 방안  
  - 부티크, 브랜드, 개별 상품 등 요청에 따라 추가 개발  
상품이 삭제되서 자동으로 품절 취소가 된 뒤, 고객에게 공지가 가지 않을 경우 CX 이슈와 그로 인한 추가 개발 예상 되어 별도 정책 필요  
다이렉트 오더 구매 동의 팝업  
  - 구매동의 API를 통해 등록여부에 따라 구매진행  
  - 구매동의 API 실패 시 구매불가  
  - 구매동의 실패 시 에러메시지 서버에서 전달  
프리오더, 다이렉트 상품을 장바구니에서 합주문 할때 동의 팝업을 여러 개 띄워야 하는지?  
신규 브랜드와 카테고리 매핑 등록 후 상품 업데이트 시점  
  - 즉시 또는 익일인 경우에 따라 개발 범위 결정  
  - 기존 브랜드와 카테고리 매핑 변경 후 상품 업데이트 시점  
10개 이하의 상품에 대한 안전 재고(90%) 정책

## [부티크 크롤러] 개발 예정 항목
여러개로 전달되는 동일 상품 정보를 하나의 상품으로 통합하는 작업 [3일]
동일정보의 색상, 사이즈를 하나의 상품 형태로 크롤링
DB와 애플리케이션 변경 (1일)
어드민(drf)의 상품 등록 API 추가/변경 (2일)
상품관리 > 승인/판매/노출 정책과 연동 [정책에 따라 일정 산정 필요]
현재는 미승인 상품으로 등록 예정
크롤링 상품의 재고 정책 반영 [5일]
고객이 주문한 재고2개, 크롤링 시 부티크에서 전달받은 재고 3개일때 주문재고 수량을 체크하여 가용재고 1개로 설정하는 작업 
현재 주문 상태 (해외 주문 확인 중/해외 주문 완료)에 따라 조정 (2일)
크롤러에 주문 정보 조회 추가 (3일)
삭제된 상품 처리 (상품 상태/데이터) [1일]
피드 미노출
재고 삭제
15분 마다 크롤링 기능 개발 [5일]
전체 크롤링과 통합 관리 할 구조 필요

## [어드민] 개발 예정 항목
주문 페이지 데이터 변경 [1일 +@]
프론트 엔드 개발 추가 (미정)
브랜드, 카테고리 매핑 버그 수정 [1일]
상품 승인 과정에서 다이렉트 오더 상품 관리 기능 추가

## [주문] 개발 예정 항목
동의 팝업과 데이터 관리 [2일]
기존 소스 파악 (1일)
프리오더 연동, 예외 처리 (1일)

## [주문생성] 개발 예정 항목
주문 요청 데이터 변경 [1일]
계층 형태 상품 크롤링으로 의존성 발생
G&B 주문 방식 변경 [1일]
디코드 주문과 1:1 대응
삭제된 상품의 주문 처리 (자동 품절 취소) [3일]
[부티크 크롤러] 5번에서 의존성 발생
전체 상품 크롤링을 마친 후 업데이트 되지 않은 상품의 주문을 취소 처리
G&B 주문 생성이 실패했을 때의 데이터 처리와 오류 로깅 [1일]
슬랙 연동 [선택]

## [상품] 개발 예정 항목
상품 상세 페이지에서 이미지 잘리는 현상 [프론트 엔드 미정]


## 개발 일정 정리
  위에 정리된 개발 항목들의 최소 예상 일정 : 업무일 기준 30일
  디코드 2.0 유지보수, 디코드 3.0 개발 이슈 상황에 따라 지연 예상 (현재 지연 발생 중)
  미정인 정책 또는 정책 변경 시 개발 일정 추가

## 전체 일정 중 고려사항
  G&B로 보낸 주문의 케이스 별(승인, 취소 등) 프로세스에 대해 디코드와 G&B가 같이 테스트를 진행해야 하며, 커뮤니케이션 시 발생하는 지연 시간을 고려하면 2주 이상 소요될 것으로 예상
  위 통합 테스트 결과에 따라 추가 개발 사항이 발생할 수 있으므로, 테스트 이후 개발 피드백 기간 필요

